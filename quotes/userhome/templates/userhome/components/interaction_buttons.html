{% load static %}

<div class="interaction-buttons d-flex align-items-center justify-content-around py-3">
  <!-- Like Button -->
  <button class="btn interaction-btn" onclick="likeContent('{{ content_type }}', {{ content_id }})">
    <img width="20px" src="{% static 'images/love.png' %}" alt="Like">
    <span class="ms-2">Like</span>
  </button>

  <!-- Comment Button -->
  <button class="btn interaction-btn" data-bs-toggle="offcanvas" data-bs-target="#comments-{{ content_type }}-{{ content_id }}">
    <img width="20px" src="{% static 'images/comment.jpeg' %}" alt="Comment">
    <span class="ms-2">Comment</span>
  </button>

  <!-- Save Button -->
  <button class="btn interaction-btn" onclick="saveContent('{{ content_type }}', {{ content_id }})">
    <img width="22px" src="{% static 'images/save.png' %}" alt="Save">
    <span class="ms-2">Save</span>
  </button>
</div>

<!-- Stats Display -->
<div class="interaction-stats px-2">
  <small class="text-muted" style="font-style: oblique;">
    <span id="likes-count-{{ content_type }}-{{ content_id }}">0</span> likes · 
    <span id="comments-count-{{ content_type }}-{{ content_id }}">0</span> comments · 
    <span id="shares-count-{{ content_type }}-{{ content_id }}">0</span> shares
  </small>
</div>

<style>
  /* Base styles */
  .interaction-buttons {
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
  }

  .interaction-btn {
    border: none;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    padding: 8px 16px;
    border-radius: 20px;
    color: var(--text-color);
  }
  
  .interaction-btn:hover {
    transform: scale(1.1);
    background: var(--hover-bg);
  }

  .interaction-btn img {
    filter: var(--icon-filter);
    opacity: 0.8;
    transition: all 0.2s ease;
  }

  .interaction-btn:hover img {
    filter: var(--icon-hover-filter);
    opacity: 1;
  }

  .interaction-btn span {
    color: inherit;
    font-weight: 500;
  }

  .interaction-stats {
    margin-top: 0.5rem;
  }

  /* Toast notification styles */
  .toast-notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--accent-color);
    color: var(--text-color);
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 1050;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    animation: fadeInOut 3s;
  }

  @keyframes fadeInOut {
    0% { opacity: 0; transform: translateY(20px); }
    10% { opacity: 1; transform: translateY(0); }
    90% { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(20px); }
  }
</style>

<script>
  function likeContent(contentType, contentId) {
    // AJAX call to like the content
    console.log(`Liked ${contentType} ${contentId}`);
    const likesCount = document.getElementById(`likes-count-${contentType}-${contentId}`);
    const currentLikes = parseInt(likesCount.textContent.replace(/[^0-9]/g, '')) + 1;
    likesCount.textContent = formatCount(currentLikes);
    showToast(`${contentType} liked!`);
  }

  function saveContent(contentType, contentId) {
    // AJAX call to save the content
    console.log(`Saved ${contentType} ${contentId}`);
    showToast(`${contentType} saved to your collection`);
  }

  function formatCount(count) {
    if (count >= 1000000) {
      return Math.floor(count / 1000000) + 'M';
    } else if (count >= 1000) {
      return Math.floor(count / 1000) + 'k';
    }
    return count.toString();
  }

  function showToast(message) {
    const existingToast = document.querySelector('.toast-notification');
    if (existingToast) {
      existingToast.remove();
    }
    
    const toast = document.createElement('div');
    toast.className = 'toast-notification';
    toast.textContent = message;
    document.body.appendChild(toast);
    
    setTimeout(() => {
      toast.remove();
    }, 3000);
  }
</script> 